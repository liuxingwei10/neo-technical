Change the journalling filesystem options on Fedora (makes the filesystem much faster)

You might be tired of the "ordered" journal of Fedora by default and cannot figure out how to remove it without burning it in a pool of lava. After messing around with it for awhile, I figured out a way to change the way that the filesystem journals itself. There are 3 different types: Journal (slowest but safest), Ordered (In between journal and writeback) and writeback (fastest but more ext2 like.)

1a.) First figure out what your /dev device your hard drive is on. Usually sda1 for systems with boot and root on the same partition, sda2 for seperate boot and root partition. Sometimes the letter "s" will be replaced with "h" so you'll need to do this command in a terminal (sda5 / hda5 is usually swap so don't mess with that):

{{{
su -c 'fdisk -l'
}}}

2a.) Now that you have hopefully determined what /dev your HDD (Hard Disc Drive) is on, you must now change the journal options via tune2fs (only apply this command to the ROOT FILESYSTEM):

{{{
su -c 'tune2fs -o journal_data_writeback /dev/sda2'
}}}

Replace /dev/sda2 with whatever your root partition is. You may use "sudo" if you edited the visudo file correctly.

3a.) Now its time to edit /etc/fstab:

Originally it might look something like this:

{{{
UUID=5ae4bec5-0fa5-4b90-b8d6-b31740ade938 /boot ext2 defaults 1 2
UUID=6c8b5b6a-9858-4dd3-9c81-a38ce2de2237 / ext4 defaults 1 1
UUID=286b83e6-9d14-424f-8f29-d91b1ebcf405 swap swap defaults 0 0
}}}

You want to change the line that has the "/" in it. In the above example, that would be the second line, to something like this:

{{{
UUID=6c8b5b6a-9858-4dd3-9c81-a38ce2de2237 / ext4 noatime,defaults,data=writeback 1 1
}}}

As you can see, noatime and data=writeback has been added. noatime is not a typo.

*DO NOT CHANGE THE UUID TO MINE IF IT ISN'T THE SAME!*

4a.) Now time to edit the boot loader:

{{{
su -c 'nano /boot/grub/menu.lst'
}}}

Find the line that looks like this:

{{{
kernel /vmlinuz-2.6.29.4-167.fc11.i686.PAE ro root=UUID=6c8b5b6a-9858-4dd3-9c81-a38ce2de2237 rhgb quiet
}}}

Edit the line by adding in "rootflags=data=writeback" without quotes into the kernel command line:

{{{
kernel /vmlinuz-2.6.29.4-167.fc11.i686.PAE ro root=UUID=6c8b5b6a-9858-4dd3-9c81-a38ce2de2237 rhgb quiet rootflags=data=writeback
}}}